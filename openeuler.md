# os

### 从应用程序的角度看，os隐藏了硬件的控制与使用细节，将计算机抽象成一组简洁的api供用户调用，使程序能够安全、方便的操控硬件。

### os内核运行在cpu的内核态模式，拥有访问硬件资源的权限。内核外的其他软件运行与用户态，这些软件通过os内核与硬件交互，只能看到其权限内的部分资源。

Vxworks os是实时操作os的典型代表，实时性高。

### os的基本功能

+ cpu管理
  + 中断响应管理：中断当前作业对cpu的使用，保存作业上下文，以便重获cpu时可以继续执行
  + cpu调度：选取内存中的某个作业，准备让其获得cpu
  + 现场恢复：中断的作业重新获得cpu时，恢复中断前的状态，继续往下执行

+ 内存管理
  + 物理内存的分配和回收：os准备为即将执行的程序分配内存并在结束后回收
  + 虚拟地址到物理地址的映射：
  + 突破物理内存的限制：当程序所需的内存空间超过计算机所配置的内存时，os将内存与外存联合起来进行管理，为程序提供一个比实际物理内存大的多的虚拟内存空间

+ 设备管理：管理各类io设备
  + 设备分配：当需要使用外部设备时，用户程序必须提出来，待os进行协调分配后方可使用
  + 设备控制：os接收上层应用程序的服务请求，转换为对物理设备的控制实现真正的io操作
  + io缓冲区的管理：os管理各类io设备的数据缓冲区，缓和cpu与io设备之间速度不匹配的矛盾

os还有个重要的功能就是向用户提供接口：命令，图形界面，函数API

### 服务器

​		服务器通过网络互联在一起。根据所提供的服务的类型不同，服务器分为web服务器、计算服务器、文件服务器(ftp)、数据库服务器、应用服务器。

​		服务器中运行大量来自不同的用户的应用，服务器应保证这些程序之间的严格隔离，隔离与安全成为比较重要的因素。对于PC机来说，资源和利用率不是最主要的因素。但是对于服务器来说，资源利用率是特别重要的。服务器os中，一般采用虚拟机、容器等虚拟化奇数实现应用隔离，提高资源利用率。DMA（直接内存存取）

### 进程线程

​		ELF文件（可执行executable、可链接link 文件file）gcc a.c -o a.out  a.out就是elf文件

​	ELF包括：

​	elf头：从硬盘中加载到内存的时候用->文件与当前硬件架构是否匹配，程序的入口地址

​	text段：每个函数中的指令

​	rodata：printf打印的信息，char * mystr="asdasd".这种常量

​	data：全局变量

​		在程序的运行阶段：还会临时分配堆栈空间。elf中不包含这些。